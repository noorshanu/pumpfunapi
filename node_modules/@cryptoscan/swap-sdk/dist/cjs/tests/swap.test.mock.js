"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const web3_js_1 = require("@solana/web3.js");
const createTransaction_js_1 = require("../utils/createTransaction.js");
(0, vitest_1.describe)('swap', () => {
    (0, vitest_1.test)('should simulate a solana swap', async () => {
        const connection = new web3_js_1.Connection('https://api.mainnet-beta.solana.com');
        const transaction = await (0, createTransaction_js_1.createTransaction)({
            network: "solana",
            from: "So11111111111111111111111111111111111111112",
            to: "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
            amount: 1,
            walletAddress: 'Hvt7wmdSEyDfptyojo4iiS3sroTPKAeKMAc4PNzXg7Ds',
        });
        const result = await connection.simulateTransaction(transaction);
        const hasError = result.value.err && !result.value.err.InstructionError;
        (0, vitest_1.expect)(result).toBeDefined();
        (0, vitest_1.expect)(hasError).toBeFalsy();
    }, 10_000);
    (0, vitest_1.test)('should simulate a pumpfun swap', async () => {
        const connection = new web3_js_1.Connection('https://api.mainnet-beta.solana.com');
        const transaction = await (0, createTransaction_js_1.createTransaction)({
            network: "solana",
            from: "So11111111111111111111111111111111111111112",
            to: "HJAoYbnsf16Z8ftk3SsuShKLQQgzmxAPu41RTpjjpump",
            amount: 1,
            walletAddress: 'Hvt7wmdSEyDfptyojo4iiS3sroTPKAeKMAc4PNzXg7Ds',
        });
        const result = await connection.simulateTransaction(transaction);
        const hasError = result.value.err && !result.value.err.InstructionError;
        (0, vitest_1.expect)(result).toBeDefined();
        (0, vitest_1.expect)(hasError).toBeFalsy();
    }, 10_000);
});
