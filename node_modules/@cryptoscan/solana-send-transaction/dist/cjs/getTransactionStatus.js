"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTransactionStatus = void 0;
const createConnection_js_1 = require("./createConnection.js");
const getTransactionStatus = async (tx, connection = (0, createConnection_js_1.createConnection)()) => {
    const status = (await connection.getSignatureStatus(tx));
    if ("Err" in status && status.Err) {
        throw new Error("Transaction confirmed and failed with errors: " +
            Object.keys(status.Err).join(", "));
    }
    if (!status?.value) {
        return;
    }
    if ("confirmationStatus" in status.value) {
        return status.value.confirmationStatus;
    }
    if ("status" in status.value) {
        return status?.value?.status?.Ok ? "confirmed" : "processed";
    }
};
exports.getTransactionStatus = getTransactionStatus;
