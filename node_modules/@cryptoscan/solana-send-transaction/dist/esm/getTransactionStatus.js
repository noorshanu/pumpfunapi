import { createConnection } from "./createConnection.js";
export const getTransactionStatus = async (tx, connection = createConnection()) => {
    const status = (await connection.getSignatureStatus(tx));
    if ("Err" in status && status.Err) {
        throw new Error("Transaction confirmed and failed with errors: " +
            Object.keys(status.Err).join(", "));
    }
    if (!status?.value) {
        return;
    }
    if ("confirmationStatus" in status.value) {
        return status.value.confirmationStatus;
    }
    if ("status" in status.value) {
        return status?.value?.status?.Ok ? "confirmed" : "processed";
    }
};
